# üìç Givix Routing Tools (2GIS + Yandex)

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è **–º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º  
**2GIS Routing API** –∏ **–Ø–Ω–¥–µ–∫—Å –ì–µ–æ–∫–æ–¥–µ—Ä–∞**.

–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. **–í—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°** (–∞–¥—Ä–µ—Å–∞ –∏/–∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã).
2. **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤–æ –≤–Ω–µ—à–Ω–µ–º Python-—Å–∫—Ä–∏–ø—Ç–µ.
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üî –∞–¥—Ä–µ—Å–∞).
4. **–†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ –≤—Ä–µ–º–µ–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∞**.
5. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ 1–°**.

–ü—Ä–æ–µ–∫—Ç –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞:
- ¬´–≤–µ—Ä—Ö—É—à–∫–∏¬ª –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–°,
- –∞–≤—Ç–æ–Ω–æ–º–Ω—É—é –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É (`batch_routes.py`),
- –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (`main.py`).

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
givix-routing/
‚îú‚îÄ‚îÄ main.py¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† # –û–¥–∏–Ω–æ—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ç–ª–∞–¥–∫–∞ API, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ batch_routes.py¬† ¬† ¬† ¬† # –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ input_batch.json ¬† ¬† ¬† # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤—ã–≥—Ä—É–∑–∫–∞ –∏–∑ 1–°)
‚îú‚îÄ‚îÄ output_batch.json¬† ¬† ¬† # –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ 1–°)
‚îú‚îÄ‚îÄ .env ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† # API-–∫–ª—é—á–∏
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md

---

## üîë –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API

### 1. 2GIS Routing API
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.

- –í–µ—Ä—Å–∏—è API: **7.0.0**
- Endpoint:
POST https://routing.api.2gis.com/routing/7.0.0/global

- –†–µ–∂–∏–º –º–∞—Ä—à—Ä—É—Ç–∞:
```json
"route_mode": "shortest"
```
> –ú–∞—Ä—à—Ä—É—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è **–±–µ–∑ —É—á—ë—Ç–∞ –ø—Ä–æ–±–æ–∫**, –ø–æ –∫—Ä–∞—Ç—á–∞–π—à–µ–º—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é.

### **2. –Ø–Ω–¥–µ–∫—Å –ì–µ–æ–∫–æ–¥–µ—Ä**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –ø—Ä—è–º–æ–≥–æ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ (–∞–¥—Ä–µ—Å ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã),
- –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –∞–¥—Ä–µ—Å).

API_KEY=YOUR_2GIS_API_KEY
YANDEX_API_KEY=YOUR_YANDEX_GEOCODER_API_KEY

## **üß† –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤**
  
–î–ª—è **–∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞** (–∑–∞–≥—Ä—É–∑–∫–∞ / –≤—ã–≥—Ä—É–∑–∫–∞):
1. **–ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**
    - –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —Å—Ç—Ä–æ–∫–æ–≤–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É —Å 6 –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π,
    - –µ—Å–ª–∏ –∞–¥—Ä–µ—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω—ã–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.
    
2. **–ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å –∞–¥—Ä–µ—Å**
    - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä—è–º–æ–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å,
    - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –º–∞—Ä—à—Ä—É—Ç.
    
3. **–ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –∞–¥—Ä–µ—Å–∞, –Ω–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**
    - –º–∞—Ä—à—Ä—É—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π –∏ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:
- –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **2GIS Routing API**,
- —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è distance_m –∏ duration_s,
- –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ –æ–Ω–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –ø–æ–ª–µ error (–º–∞—Ä—à—Ä—É—Ç –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç).

---
## **üß© –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ —Ñ–∞–π–ª–∞–º**

### **üß± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–° (¬´–≤–µ—Ä—Ö—É—à–∫–∏¬ª)**

1–° **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å API**.
–û–Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ JSON-—Ñ–∞–π–ª—ã**.
#### **–§–æ—Ä–º–∞—Ç –æ–±–º–µ–Ω–∞ —Å 1–°**
- input_batch.json ‚Äî –≤—ã–≥—Ä—É–∑–∫–∞ –∏–∑ 1–°
- output_batch.json ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ 1–°
    
üìå **1–° –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞:**
- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ id –º–∞—Ä—à—Ä—É—Ç–∞,
- –ø–µ—Ä–µ–¥–∞—á—É –∞–¥—Ä–µ—Å–æ–≤ –∏/–∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç,
- –ø—Ä–∏—ë–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–∏.

üìå **1–° –ù–ï –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:**
- –≥–µ–æ–∫–æ–¥–∏–Ω–≥,
- –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é,
- –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API.

---
### **üß©**¬†
### **input_batch.json**
### ¬†**‚Äî –≤—Ö–æ–¥ –∏–∑ 1–°**

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ–±–º–µ–Ω–∞.
```json
{
  "routes": [
    {
      "id": "R001",
      "loading": {
        "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –ì—É—Ä—å—è–Ω–æ–≤–∞, 69–∫1",
        "lat": null,
        "lon": null
      },
      "unloading": {
        "address": "–ú–æ—Å–∫–≤–∞, –ú–∏—á—É—Ä–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 45",
        "lat": null,
        "lon": null
      },
      "distance_m": null,
      "duration_s": null
    }
  ]
}
```
#### **–ü—Ä–∞–≤–∏–ª–∞**
- address, lat, lon ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –Ω–æ **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ**.
- lat / lon –º–æ–≥—É—Ç –±—ã—Ç—å:
    - null,
    - —á–∏—Å–ª–æ–º,
    - —Å—Ç—Ä–æ–∫–æ–π.
    
- –§–æ—Ä–º–∞—Ç **–Ω–µ –¥–æ–ª–∂–µ–Ω –º–µ–Ω—è—Ç—å—Å—è** —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã 1–°.
```json
{
  "routes": [
    {
      "id": "R001",
      "loading": {
        "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –ì—É—Ä—å—è–Ω–æ–≤–∞, 69–∫1",
        "lat": "55.677976",
        "lon": "37.718911"
      },
      "unloading": {
        "address": "–ú–æ—Å–∫–≤–∞, –ú–∏—á—É—Ä–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 45",
        "lat": "55.687792",
        "lon": "37.482798"
      },
      "distance_m": 21346,
      "duration_s": 3802,
      "error": null
    }
  ]
}
```
üìå **–í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≤—ã—Ö–æ–¥–µ ‚Äî —Å—Ç—Ä–æ–∫–∏ —Å 6 –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.**
üìå **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –∏ –Ω–µ –∑–∞—Ç–∏—Ä–∞—é—Ç—Å—è.**

## **üß©**¬†
## **batch_routes.py**
## ¬†**‚Äî –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–∑ input_batch.json,
- –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∞–¥—Ä–µ—Å–æ–≤/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç,
- —Ä–∞—Å—á—ë—Ç –º–∞—Ä—à—Ä—É—Ç–æ–≤ **–±–µ–∑ –ø—Ä–æ–±–æ–∫**,
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ output_batch.json.
  
üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- –ø—Ä–∏ —Ä–∞–∑–æ–≤—ã—Ö –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç–∞—Ö,
- –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏,
- –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è 1–°.
üìå –ù–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ API.

---
## **üß©**¬†
## **main.py**
## ¬†**‚Äî –æ–¥–∏–Ω–æ—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –æ—Ç–ª–∞–¥–∫–∞**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 2GIS Routing API,
- –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤,
- —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–∞,
- –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫.

üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, –∞ –Ω–µ 1–°.
---
## **üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- Demo-–∫–ª—é—á 2GIS:
    - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –¥–ª–∏–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∞ (~50 –∫–º),
    - –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã "No routes".
        
    
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∫–ª—é—á:
    
    - —Å–Ω–∏–º–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é,
    - –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑-–∑–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

---

## **üèÅ –†–µ–∑—é–º–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

- **1–°** ‚Äî —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç –∏ –¥–∞–Ω–Ω—ã–µ.
- **batch_routes.py** ‚Äî –≤—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- **main.py** ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.
- –§–æ—Ä–º–∞—Ç—ã JSON —Å—Ç–∞–±–∏–ª—å–Ω—ã –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã.
- –û—à–∏–±–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç –ø–∞–∫–µ—Ç, –∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º.

---
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è:
- –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –Ω–∞–ø—Ä—è–º—É—é —Å 1–° –ø–æ HTTP,
- –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥—Ä—É–∑–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤,
- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –ë–î,
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.